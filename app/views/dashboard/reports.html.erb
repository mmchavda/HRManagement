<div class="max-w-4xl mx-auto bg-white shadow-2xl rounded-2xl p-4 sm:p-10 mt-4">
  <h1 class="text-2xl font-extrabold text-gray-600 mb-12">Download Reports</h1>

  <div class="flex flex-col sm:flex-row gap-6 mb-10">
    <div class="w-full">
      <label for="start_date" class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
      <input type="date" id="start_date" class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
    </div>
    <div class="w-full">
      <label for="end_date" class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
      <input type="date" id="end_date" class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
    </div>
  </div>

  <div class="space-y-6">
    <% [["Tickets Report", "tickets_link"], ["Reimbursement Report", "reimbursement_link"], ["Expenses Report", "expenses_link"]].each do |label, id| %>
      <div class="flex justify-between items-center bg-gray-50 px-6 py-4 rounded-lg shadow-sm hover:shadow-md transition">
        <span class="text-base font-medium text-gray-800"><%= label %></span>
        <a id="<%= id %>" href="#" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:pointer-events-none">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Download CSV
        </a>
      </div>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const startInput = document.getElementById("start_date");
    const endInput = document.getElementById("end_date");

    function updateLinks() {
      const start = startInput.value;
      const end = endInput.value;
      const valid = start && end && start <= end;
      const params = `?start_date=${start}&end_date=${end}`;

      ["tickets_link", "reimbursement_link", "expenses_link"].forEach(id => {
        const el = document.getElementById(id);
        if (valid) {
          el.href = el.href.split('?')[0] + params;
          el.classList.remove("disabled:pointer-events-none", "disabled:opacity-50");
        } else {
          el.href = "#";
          el.classList.add("disabled:pointer-events-none", "disabled:opacity-50");
        }
      });
    }

    startInput.addEventListener("input", updateLinks);
    endInput.addEventListener("input", updateLinks);
  });
</script>
