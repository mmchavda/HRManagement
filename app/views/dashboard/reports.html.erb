<div class="container mx-auto max-w-3xl py-10 px-6 bg-white rounded-2xl shadow-xl">
  <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">Download CSV Reports</h1>

  <div class="flex flex-col sm:flex-row justify-center gap-6 mb-10">
    <div>
      <label for="start_date" class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
      <input type="date" id="start_date" class="w-full sm:w-48 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:border-blue-300">
    </div>
    <div>
      <label for="end_date" class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
      <input type="date" id="end_date" class="w-full sm:w-48 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:border-blue-300">
    </div>
  </div>

  <!-- Report Rows -->
  <div class="divide-y divide-gray-300">
    <% [["Tickets CSV", "tickets_link"], ["Reimbursement Requests CSV", "reimbursement_link"], ["Expenses CSV", "expenses_link"]].each do |label, id| %>
      <div class="flex justify-between items-center py-5">
        <span class="text-base font-medium text-gray-700"><%= label %></span>
        <a id="<%= id %>" href="#" class="hover:scale-105 transition-transform">
          <img src="/download_csv.png" alt="Download CSV" class="h-6 w-6"> <!-- âœ… smaller icon -->
        </a>
      </div>
    <% end %>
  </div>
</div>


<script>
  function updateLinks() {
    const start = document.getElementById("start_date").value;
    const end = document.getElementById("end_date").value;

    const params = `?start_date=${start}&end_date=${end}`;

    document.getElementById("tickets_link").href = "/tickets/export_csv" + params;
    document.getElementById("reimbursement_link").href = "/reimbursement_requests/export_csv" + params;
    document.getElementById("expenses_link").href = "/expenses/export_csv" + params;
  }

  document.getElementById("start_date").addEventListener("change", updateLinks);
  document.getElementById("end_date").addEventListener("change", updateLinks);
</script>
